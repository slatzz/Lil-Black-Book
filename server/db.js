const Sequelize = require('sequelize');
const mysql = require('mysql');

////////////////////////////////////////////////////////////////////////////////////
//////////////////////// SET UP DATABASE //////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
const DB_NAME = 'spooky';
const DB_USER = 'root';
const DB_PASS = '';

const sequelize = new Sequelize(DB_NAME, DB_USER, DB_PASS, {
    host: 'localhost',
    dialect: 'mysql'
  });

////////////////////////////////////////////////////////////////////////////////////
////////////////////////////QUERY/FAVORITES - MODELS ///////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
const Query = sequelize.define('Query', {
  id: { 
      type: Sequelize.NUMBER, 
      auto_increment: true,
      primaryKey: true
  },
  city: {
    type: Sequelize.NUMBER
  },
}, { timestamps: false })

const Favorites = sequelize.define('Favorites', {
  id:{
      type: Sequelize.NUMBER,
      auto_increment: true,
      primaryKey: true
  },
  business: {
    type: Sequelize.STRING
  },
  city: {
    type: Sequelize.NUMBER
  }
}, {timestamps: false})

////////////////////////////////////////////////////////////////////////////////////
//////////////////////TEST DATABSE /////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////

sequelize.authenticate()
  .then( () => {
      console.log('Happy Ghost Hunting!')
  })
  .catch( err => {
    console.log(err, 'Cannot find your spooky boys!')
  })
module.exports = { sequelize, Query, Favorites };